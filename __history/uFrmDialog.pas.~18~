unit uFrmDialog;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,
  FMX.Types, FMX.Controls, FMX.Forms, FMX.Graphics, FMX.Dialogs, FMX.Objects,
  FMX.Controls.Presentation, FMX.StdCtrls;

type
  TfrmDialog = class(TForm)
    iconConfirm: TImage;
    iconSuccess: TImage;
    titleMessage: TText;
    txtMessage: TText;
    btnOk: TSpeedButton;
    StyleBook1: TStyleBook;
    btnYes: TSpeedButton;
    btnNo: TSpeedButton;
    procedure btnYesClick(Sender: TObject);
  private
    FOnConfirm: TProc;
  public
    class procedure ShowConfirmDialog(Msg: String; OnConfirm: TProc);
  end;

var
  frmDialog: TfrmDialog;

implementation

{$R *.fmx}

procedure TfrmDialog.btnYesClick(Sender: TObject);
begin
  if Assigned(FOnConfirm) then
    FOnConfirm;
  Close;
end;

class procedure TfrmDialog.ShowConfirmDialog(Msg: string; OnConfirm: TProc);
var
  Dialog: TfrmDialog;
begin
  Dialog := TfrmDialog.Create(nil);
  try
    // Ativa os elementos visuais de confirmação
    Dialog.btnNo.Visible := True;
    Dialog.btnYes.Visible := True;
    Dialog.iconConfirm.Visible := True;
    Dialog.iconSuccess.Visible := False;
    Dialog.btnOk.Visible := False;

    // Define o título e o texto da mensagem
    Dialog.titleMessage.Text := 'Espere!';
    Dialog.txtMessage.Text := Msg;

    // Define a ação após a confirmação
    Dialog.FOnConfirm := OnConfirm;
    Dialog.ShowModal;
  finally
    Dialog.Free;
  end;
end;

end.
